# win-file-agent

Агент для обработки файлов сторонними Windows-утилитами командной строки. HTTP-сервер с REST API, управление очередью задач, установка как Windows-служба.

## Сборка сервиса ##
  Для сборки сервиса в linux надо выполнить команду make build
  Для сборки сревиса для windows надо выплнить команду make build-windows

## Статические анализ кода ##
  Для запуска анализа кода надо выполнить make analysis

## Установка сервис в среде windows ##
  1. Собрать проект через команду make build-windows
  2. Скопировать win-file-agent.exe в папку 
  3. Открыть windows cmd (ctrl+shift+p)
  4. Вставить команду и запусть
  5. Открыть администрирование сервисов
  6. Найти по имени файла новый установленный сервис
  7. Настроить в нем автозапуск и запуск

## Дополнительная настройка сервиса ##
### Настройка порта сервиса и кол-ва воркеров для параллельной обработки команд
  1. Создаем файл config.json в папке с исполняемым файлом .exe, формат:
    {
      "port": 8080,
      "worker_count": 4
    }
  2. Устанавливаем новый порт или кол-во workers и сохраняем
  3. Открываем администрирование сервисов
  4. Находим по имени файла установленный сервис
  5. Нажимаем на кнопку перезапуска сервиса для применения изменений
  6. В логе сервиса повится записть "Загружен конфиг: {Port:8080 WorkerCount:4}"
